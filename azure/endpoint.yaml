# yaml-language-server: $schema=https://azuremlsdk2.blob.core.windows.net/latest/onlineEndpoint.schema.json
name: gpt2
type: online
infrastructure: managed
traffic:
  blue: 100

deployments:
  #blue deployment
  blue:    
    model: 
      name: gpt2-model
      version: 1
      path: ../gpt2-model/
    code_configuration:      
      code: 
        directory: scoring/
      scoring_script: score.py
    environment: 
      name: gpt-env
      version: 1
      conda_file: file:conda.yml
    liveness_probe:
      period_seconds: 10
      initial_delay_seconds: 300
      timeout_seconds: 2
      success_threshold: 1
      failure_threshold: 3